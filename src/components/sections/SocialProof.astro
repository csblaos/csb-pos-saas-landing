---
import { getLangFromUrl } from '../../lib/lang';
import { fromLang, homeSocialProofCopy } from '../../data/localizedCopy';
import TestimonialCarousel from '../islands/TestimonialCarousel';

const lang = getLangFromUrl(Astro.url);
const social = fromLang(homeSocialProofCopy, lang);

interface Testimonial {
  name: string;
  role: string;
  shop: string;
  quote: string;
  image: string;
  stars: number;
  color: string;
}

const testimonials: Testimonial[] = [
  {
    name: "Sarah J.",
    role: "Online Seller",
    shop: "Fashion BKK",
    quote: "best.pos.ever",
    image: "https://i.pravatar.cc/150?u=a042581f4e29026024d",
    stars: 5,
    color: "bg-pink-400"
  },
  {
    name: "David C.",
    role: "Cafe Owner",
    shop: "Drip & Drop",
    quote: "saved.my.time",
    image: "https://i.pravatar.cc/150?u=a042581f4e29026704d",
    stars: 5,
    color: "bg-lime-400"
  },
  {
    name: "Jenny T.",
    role: "TikTok Creator",
    shop: "Jen's Gadgets",
    quote: "easy.to.use",
    image: "https://i.pravatar.cc/150?u=a04258114e29026302d",
    stars: 5,
    color: "bg-cyan-400"
  },
  {
    name: "Somchai K.",
    role: "Retailer",
    shop: "K-Shop",
    quote: "game.changer",
    image: "https://i.pravatar.cc/150?u=somchai",
    stars: 5,
    color: "bg-orange-400"
  },
  {
    name: "Linda M.",
    role: "Store Manager",
    shop: "Bloom & Co.",
    quote: "support.team",
    image: "https://i.pravatar.cc/150?u=linda",
    stars: 5,
    color: "bg-purple-400"
  },
  {
    name: "Alex R.",
    role: "Entrepreneur",
    shop: "TechHub",
    quote: "all.in.one",
    image: "https://i.pravatar.cc/150?u=alex",
    stars: 5,
    color: "bg-blue-400"
  },
  {
    name: "Phommachanh S.",
    role: "Boutique Owner",
    shop: "Lao Elegance",
    quote: "business.growth",
    image: "https://i.pravatar.cc/150?u=phommachanh",
    stars: 5,
    color: "bg-emerald-400"
  }
];

---

<section class="py-20 border-y-1 border-[var(--color-border)] bg-[var(--color-bg-card)]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <div class="text-center max-w-4xl mx-auto mb-12 space-y-4">
      <h2 class="text-3xl md:text-5xl font-black text-[var(--color-text)]">
        {social.headline}
      </h2>
      <p class="text-base md:text-lg font-medium text-gray-700 leading-relaxed">
        {social.subtitle}
      </p>
    </div>

    <div class="grid sm:grid-cols-3 gap-4 mb-12">
      {social.stats.map((item) => (
        <div class="p-5 bg-[var(--color-bg)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)] text-center">
          <p class="text-3xl font-black text-[var(--color-text)]">{item.value}</p>
          <p class="text-sm font-bold text-gray-700 mt-1">{item.label}</p>
        </div>
      ))}
    </div>

    <div class="mb-10 text-center">
      <h3 class="text-xl md:text-2xl font-black text-[var(--color-text)] mb-4">{social.businessTypesTitle}</h3>
      <div class="flex flex-wrap justify-center gap-3">
        {social.businessTypes.map((type) => (
          <span class="px-4 py-2 bg-black text-white text-sm font-bold border-1 border-[var(--color-border)]">
            {type}
          </span>
        ))}
      </div>
    </div>

    <div class="grid md:grid-cols-3 gap-6 mb-10">
      {social.testimonials.map((item) => (
        <article class="p-6 bg-[var(--color-bg)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)]">
          <p class="text-base font-medium text-gray-800 leading-relaxed mb-5">"{item.quote}"</p>
          <div class="border-t-1 border-[var(--color-border)] pt-4">
            <p class="font-black text-[var(--color-text)]">{item.owner}</p>
            <p class="text-sm font-semibold text-gray-600">{item.shop}</p>
          </div>
        </article>
      ))}
    </div>

    <!-- <div class="mb-12">
      <TestimonialCarousel client:load lang={lang} testimonials={testimonials} />
    </div> -->

    <div class="text-center">
      <p class="inline-block max-w-4xl px-6 py-4 bg-lime-300 text-black font-bold border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)]">
        {social.trustStatement}
      </p>
    </div>
  </div>
</section>
