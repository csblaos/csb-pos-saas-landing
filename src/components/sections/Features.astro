---
import Card from '../common/Card.astro';
import { ClipboardPaste, Truck, Package, History, Printer, ShieldCheck } from 'lucide-react';
import { getLangFromUrl } from '../../lib/lang';
import { t } from '../../data/i18n';

const lang = getLangFromUrl(Astro.url);

const features = [
  {
    icon: ClipboardPaste,
    title: t('features.smartPaste', lang),
    desc: t('features.smartPaste.desc', lang),
    color: "bg-blue-200"
  },
  {
    icon: Truck,
    title: t('features.codManagement', lang),
    desc: t('features.codManagement.desc', lang),
    color: "bg-green-200"
  },
  {
    icon: Package,
    title: t('features.realTimeStock', lang),
    desc: t('features.realTimeStock.desc', lang),
    color: "bg-yellow-200"
  },
  {
    icon: Printer,
    title: t('features.instantLabels', lang),
    desc: t('features.instantLabels.desc', lang),
    color: "bg-pink-200"
  },
  {
    icon: History,
    title: t('features.customerHistory', lang),
    desc: t('features.customerHistory.desc', lang),
    color: "bg-purple-200"
  },
  {
    icon: ShieldCheck,
    title: t('features.secureStable', lang),
    desc: t('features.secureStable.desc', lang),
    color: "bg-orange-200"
  }
];
---

<section id="features" class="py-20 border-b-2 border-[var(--color-border)]">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
    <div class="feature-reveal text-center mb-16 space-y-4">
      <h2 class="text-4xl md:text-5xl font-black uppercase text-[var(--color-text)]">{t('features.title', lang)}</h2>
      <p class="text-lg md:text-xl font-semibold text-gray-600">{t('features.subtitle', lang)}</p>
    </div>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {features.map((f, i) => (
        <Card class="feature-card hover:-translate-y-2 transition-transform duration-300" style={`--feature-delay: ${i * 70}ms;`}>
          <div class={`w-12 h-12 ${f.color} border-1 border-[var(--color-border)] flex items-center justify-center mb-4 shadow-[2px_2px_0px_0px_var(--color-shadow)] text-black`}>
            <f.icon size={24} />
          </div>
          <h3 class="text-xl font-black mb-2 text-[var(--color-text)]">{f.title}</h3>
          <p class="font-medium text-gray-700 leading-relaxed">{f.desc}</p>
        </Card>
      ))}
    </div>
  </div>
</section>

<style>
  @media (prefers-reduced-motion: no-preference) {
    #features[data-cta-reveal="true"] .feature-reveal {
      animation: featureHeadingSlide 420ms cubic-bezier(0.2, 0.8, 0.2, 1);
    }

    #features[data-cta-reveal="true"] .feature-card {
      animation: featureCardSlide 520ms cubic-bezier(0.22, 1, 0.36, 1) both;
      animation-delay: var(--feature-delay, 0ms);
    }
  }

  @keyframes featureHeadingSlide {
    from {
      opacity: 0;
      transform: translateY(22px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes featureCardSlide {
    from {
      opacity: 0;
      transform: translateX(28px);
    }

    to {
      opacity: 1;
      transform: translateX(0);
    }
  }
</style>
