---
import Base from '../../layouts/Base.astro';
import Navbar from '../../components/sections/Navbar.astro';
import Hero from '../../components/sections/Hero.astro';
import Features from '../../components/sections/Features.astro';
import Pricing from '../../components/sections/Pricing.astro';
import Testimonials from '../../components/sections/Testimonials.astro';
import ContactSection from '../../components/sections/ContactSection.astro';
import Footer from '../../components/sections/Footer.astro';
import { getLangFromUrl, languages } from '../../lib/lang';
import { t } from '../../data/i18n';
import { fromLang, homeBusinessTypeCopy } from '../../data/localizedCopy';

export async function getStaticPaths() {
  return Object.keys(languages).map(lang => ({ params: { lang } }));
}

const lang = getLangFromUrl(Astro.url);
const businessType = fromLang(homeBusinessTypeCopy, lang);

const faqs = [
  { q: t('faq.q1', lang), a: t('faq.a1', lang) },
  { q: t('faq.q2', lang), a: t('faq.a2', lang) },
  { q: t('faq.q3', lang), a: t('faq.a3', lang) },
];
---

<Base title="AstroPOS - The Ultimate Sales Machine" image="/images/og/og-home.png">
  <Navbar />
  
  <main>
    <Hero />

    <!-- Business Types -->
    <section class="py-16 border-y-0 border-[var(--color-border)] bg-[var(--color-bg-card)]">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full text-center">
        <h2 class="text-3xl font-black mb-12 uppercase text-[var(--color-text)]">
          {businessType.title}
        </h2>
        <div class="grid md:grid-cols-3 gap-6">
           <div class="p-6 bg-[var(--color-bg)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)] hover:-translate-y-1 transition-transform">
             <div class="text-4xl mb-4">ðŸ‘—</div>
             <h3 class="text-xl font-black mb-2">{businessType.retail}</h3>
             <p class="text-sm opacity-70 font-bold">Fashion, Gadgets, Cosmetics</p>
           </div>
           <div class="p-6 bg-[var(--color-bg)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)] hover:-translate-y-1 transition-transform">
             <div class="text-4xl mb-4">â˜•</div>
             <h3 class="text-xl font-black mb-2">{businessType.cafe}</h3>
             <p class="text-sm opacity-70 font-bold">Coffee, Bakery, Quick Service</p>
           </div>
           <div class="p-6 bg-[var(--color-bg)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)] hover:-translate-y-1 transition-transform">
             <div class="text-4xl mb-4">ðŸ’…</div>
             <h3 class="text-xl font-black mb-2">{businessType.service}</h3>
             <p class="text-sm opacity-70 font-bold">Salon, Spa, Car Care</p>
           </div>
        </div>
      </div>
    </section>

    <Features />
    
    <!-- How it works -->
    <section class="py-20 bg-[var(--color-bg-card)] border-y-0 border-[var(--color-border)]">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full text-center">
        <h2 class="text-4xl font-black mb-12 uppercase text-[var(--color-text)]">{t('howItWorks.title', lang)}</h2>
        <div class="grid md:grid-cols-3 gap-8">
          <div class="p-6">
            <div class="w-16 h-16 bg-lime-400 border-1 border-[var(--color-border)] flex items-center justify-center text-3xl font-black mx-auto mb-4 shadow-[2px_2px_0px_0px_var(--color-shadow)] text-black">1</div>
            <h3 class="text-2xl font-bold mb-2 text-[var(--color-text)]">{t('howItWorks.step1', lang)}</h3>
            <p class="text-gray-600 font-medium">{t('howItWorks.step1.desc', lang)}</p>
          </div>
          <div class="p-6">
            <div class="w-16 h-16 bg-pink-400 border-1 border-[var(--color-border)] flex items-center justify-center text-3xl font-black mx-auto mb-4 shadow-[2px_2px_0px_0px_var(--color-shadow)] text-black">2</div>
            <h3 class="text-2xl font-bold mb-2 text-[var(--color-text)]">{t('howItWorks.step2', lang)}</h3>
            <p class="text-gray-600 font-medium">{t('howItWorks.step2.desc', lang)}</p>
          </div>
          <div class="p-6">
            <div class="w-16 h-16 bg-blue-400 border-1 border-[var(--color-border)] flex items-center justify-center text-3xl font-black mx-auto mb-4 shadow-[2px_2px_0px_0px_var(--color-shadow)] text-black">3</div>
            <h3 class="text-2xl font-bold mb-2 text-[var(--color-text)]">{t('howItWorks.step3', lang)}</h3>
            <p class="text-gray-600 font-medium">{t('howItWorks.step3.desc', lang)}</p>
          </div>
        </div>
      </div>
    </section>

    <Testimonials lang={lang} />

    <Pricing />

    <ContactSection />

    <!-- FAQ -->
    <section class="py-20">
      <div class="container mx-auto px-4 max-w-3xl">
        <h2 class="text-4xl font-black mb-12 text-center uppercase text-[var(--color-text)]">{t('faq.title', lang)}</h2>
        <div class="space-y-6">
          {faqs.map((f, i) => (
             <details class="group bg-[var(--color-bg-card)] border-1 border-[var(--color-border)] shadow-[2px_2px_0px_0px_var(--color-shadow)] open:shadow-none open:translate-y-1 transition-all">
               <summary class="flex justify-between items-center p-6 font-bold cursor-pointer list-none text-[var(--color-text)]">
                 <span>{f.q}</span>
                 <span class="transform group-open:rotate-180 transition-transform">â–¼</span>
               </summary>
               <div class="px-6 pb-6 text-gray-600 font-medium leading-relaxed border-t-1 border-[var(--color-border)] pt-4">
                 {f.a}
               </div>
             </details>
          ))}
        </div>
      </div>
    </section>

    <!-- Final CTA -->
    <section class="py-24 bg-black text-white text-center">
      <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 w-full">
        <h2 class="text-4xl md:text-6xl font-black mb-8 leading-tight">
          {t('finalCta.line1', lang)} <br/>
          <span class="text-lime-400">{t('finalCta.line2', lang)}</span>
        </h2>
        <a 
          href={`/${lang}/packages`} 
          class="inline-block bg-lime-400 text-black text-xl md:text-2xl font-black uppercase tracking-wider px-12 py-6 border-1 border-white shadow-[2px_2px_0px_0px_rgba(255,255,255,1)] hover:shadow-[2px_2px_0px_0px_rgba(255,255,255,1)] hover:translate-x-[4px] hover:translate-y-[4px] active:shadow-none active:translate-x-[8px] active:translate-y-[8px] transition-all duration-150 cursor-pointer"
        >
          ðŸš€ {t('hero.cta.start', lang)}
        </a>
      </div>
    </section>
  </main>
  
  <Footer />
</Base>
