# i18n Guide: Add a New Language

This project uses route-based languages (`/en`, `/th`, `/la`) and two translation systems:

- `src/data/i18n.ts` for key-value UI strings with `t(...)`
- `src/data/localizedCopy.ts` for structured copy objects with `fromLang(...)`

Use this checklist when adding a new language.

## 1) Add language config

Edit `src/lib/lang.ts`:

- Add new language code in `languages` (label + flag)
- `Lang` type updates automatically from `languages`
- Decide whether to keep or change `defaultLang`

Example:

```ts
export const languages = {
  en: { label: 'English', flag: 'US' },
  th: { label: 'Thai', flag: 'TH' },
  la: { label: 'Lao', flag: 'LA' },
  vi: { label: 'Tieng Viet', flag: 'VN' }
} as const;
```

## 2) Add all keys in `src/data/i18n.ts`

- Add a new top-level language object (for example `vi: { ... }`)
- Start by copying all keys from `en`
- Translate values
- Keep keys exactly the same as `en`

Fallback behavior:

- `t(key, lang)` falls back to `en` key first, then returns `key` if missing

## 3) Add structured translations in `src/data/localizedCopy.ts`

For every localized object used with `fromLang(...)`, add the new language entry.

Important:

- `fromLang` is typed as `Record<Lang, ...>`
- If a language is missing in one object, TypeScript should fail at compile time

## 4) Update SEO language metadata

Edit:

- `src/data/seo/site.ts` -> add locale code in `locales` (example: `vi: 'vi_VN'`)
- `src/data/seo/pages.ts` -> add new language content for every `SeoPageKey`

## 5) Update hardcoded language checks

Current file to update:

- `src/layouts/Base.astro`

Find this list:

```ts
['en', 'th', 'la']
```

Add your new language code there, or refactor it to use `languages` dynamically.

## 6) Open Graph font coverage (if needed)

If new language needs a different script/font:

- Add font files in `public/fonts`
- Update `src/pages/open-graph/[...route].ts` font families + font files

## 7) Verify build

Run:

```bash
npm run build
```

Then spot-check:

- Language switcher routes
- Navbar active state after language change
- SEO tags (`canonical`, `hreflang`, title/description)
- Open Graph image rendering

## Quick sanity checks

- No missing keys in `i18n.ts`
- No missing language entries in `localizedCopy.ts`
- New language exists in `languages`
- SEO presets include the new language
